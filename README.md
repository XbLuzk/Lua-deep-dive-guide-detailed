# Lua æ·±åº¦å…¥é—¨æŒ‡å—

> å¸®åŠ© Java åç«¯å’Œ Vue/TypeScript å‰ç«¯å¼€å‘è€…é›¶åŸºç¡€å…¥é—¨ Lua è¯­è¨€

[![Lua](https://img.shields.io/badge/Lua-5.4-blue.svg)](https://www.lua.org/)
[![GitHub](https://img.shields.io/badge/GitHub-Lua--deep--dive--guide-blue.svg)](https://github.com/XbLuzk/Lua-deep-dive-guide-detailed)

## ğŸ“š é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä»½é¢å‘æœ‰ç¼–ç¨‹ç»éªŒçš„å¼€å‘è€…ï¼ˆç‰¹åˆ«æ˜¯ Java åç«¯å’Œ JavaScript/TypeScript å‰ç«¯å¼€å‘è€…ï¼‰çš„ Lua è¯­è¨€æ·±åº¦å­¦ä¹ æŒ‡å—ã€‚é€šè¿‡å¯¹æ¯”ç†Ÿæ‚‰çš„è¯­è¨€ç‰¹æ€§ï¼Œå¸®åŠ©å¿«é€Ÿå»ºç«‹ Lua æ€ç»´æ¨¡å‹ï¼Œç†è§£å…¶ç‹¬ç‰¹çš„è®¾è®¡å“²å­¦å’Œåº•å±‚æœºåˆ¶ã€‚

## ğŸ¯ ç›®æ ‡è¯»è€…

- âœ… å…·å¤‡ Java åç«¯å¼€å‘ç»éªŒ
- âœ… å…·å¤‡ Vue/TypeScript å‰ç«¯å¼€å‘ç»éªŒ
- âœ… é›¶ Lua åŸºç¡€æˆ–åˆæ­¥æ¥è§¦è¿‡ Lua
- âœ… éœ€è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Luaï¼ˆå¦‚ Redis è„šæœ¬ã€OpenRestyã€æ¸¸æˆå¼€å‘ç­‰ï¼‰

## âœ¨ æ ¸å¿ƒç‰¹è‰²

### 1. å¯¹æ¯”å¼å­¦ä¹ 
é€šè¿‡ä¸ Java å’Œ JavaScript çš„è¯¦ç»†å¯¹æ¯”ï¼Œå¿«é€Ÿç†è§£ Lua çš„ç‹¬ç‰¹ä¹‹å¤„ï¼š
- åŠ¨æ€å¼ºç±»å‹ vs é™æ€å¼ºç±»å‹ vs åŠ¨æ€å¼±ç±»å‹
- Table ç»Ÿä¸€æ¨¡å‹ vs åˆ†ç¦»çš„æ•°ç»„/å¯¹è±¡ç»“æ„
- åç¨‹ vs çº¿ç¨‹ vs async/await
- å…ƒè¡¨æœºåˆ¶ vs åå°„/ä»£ç†

### 2. ç”±æµ…å…¥æ·±
- **åŸºç¡€ç¯‡**ï¼šè¯­è¨€èŒƒå¼ã€åŸºæœ¬è¯­æ³•ã€æ•°æ®ç±»å‹
- **æ ¸å¿ƒç¯‡**ï¼šTable æ·±åº¦è§£æã€å…ƒè¡¨ä¸å¯¹è±¡æ¨¡å‹
- **è¿›é˜¶ç¯‡**ï¼šå‡½æ•°å¼ç¼–ç¨‹ã€åç¨‹ã€æ¨¡å—åŒ–
- **å®æˆ˜ç¯‡**ï¼šé”™è¯¯å¤„ç†ã€æ€§èƒ½ä¼˜åŒ–ã€å·¥ç¨‹é›†æˆ

### 3. å®æˆ˜å¯¼å‘
æ¶µç›–çœŸå®åœºæ™¯åº”ç”¨ï¼š
- ğŸ”´ Redis Lua è„šæœ¬åŸå­æ“ä½œ
- ğŸš€ OpenResty é«˜å¹¶å‘ Web å¼€å‘
- ğŸ® æ¸¸æˆè„šæœ¬å¼€å‘
- âš¡ LuaJIT FFI é«˜æ€§èƒ½æ‰©å±•

### 4. å¯è§†åŒ–å›¾è§£
ä½¿ç”¨ Mermaid å›¾è¡¨æ¸…æ™°å±•ç¤ºï¼š
- Table å†…éƒ¨ç»“æ„
- ç»§æ‰¿é“¾æŸ¥æ‰¾æœºåˆ¶
- åç¨‹è°ƒåº¦æµç¨‹
- å¹¶å‘æ¨¡å‹å¯¹æ¯”

## ğŸ“– å†…å®¹ç›®å½•

1. **è¯­è¨€èŒƒå¼è½¬æ¢**
   - æ ¸å¿ƒå·®å¼‚å¯¹ç…§
   - Lua ç‹¬ç‰¹è®¾è®¡å“²å­¦
   - åŸºç¡€è¯­æ³•é€Ÿè§ˆ

2. **æ ¸å¿ƒå®¹å™¨ï¼šTable**
   - Table çš„å¤šé‡è§’è‰²
   - å†…éƒ¨ç»“æ„ä¸æ€§èƒ½
   - å¸¸è§æ¨¡å¼ä¸é™·é˜±

3. **å…ƒè¡¨ä¸å¯¹è±¡æ¨¡å‹**
   - å…ƒæ–¹æ³•è¯¦è§£
   - é¢å‘å¯¹è±¡ç¼–ç¨‹æ¨¡å¼
   - ç»§æ‰¿ä¸ Mixin

4. **å‡½æ•°å¼ç¼–ç¨‹**
   - å¤šè¿”å›å€¼æœºåˆ¶
   - é—­åŒ…ä¸ Upvalue
   - æ¨¡å—åŒ–å®è·µ

5. **åç¨‹å¹¶å‘**
   - ååŒå¼è°ƒåº¦åŸç†
   - ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼
   - ä¸ async/await å¯¹æ¯”

6. **é”™è¯¯å¤„ç†ä¸è°ƒè¯•**
   - pcall/xpcall æœºåˆ¶
   - debug åº“ä½¿ç”¨
   - è°ƒè¯•æŠ€å·§

7. **å·¥ç¨‹åŒ–å®è·µ**
   - Redis è„šæœ¬é›†æˆ
   - OpenResty Web å¼€å‘
   - æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ

8. **é™„å½•**
   - å¿«é€Ÿå¯¹ç…§è¡¨
   - å¸¸è§é™·é˜±æ¸…å•
   - å»¶ä¼¸é˜…è¯»èµ„æº

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é˜…è¯»å®Œæ•´æŒ‡å—

æŸ¥çœ‹å®Œæ•´çš„å­¦ä¹ æŒ‡å—ï¼š[Lua deep dive guide detailed.md](./Lua%20deep%20dive%20guide%20detailed.md)

### 2. ç¯å¢ƒå‡†å¤‡

**å®‰è£… Lua**ï¼š
```bash
# macOS
brew install lua

# Ubuntu/Debian
sudo apt-get install lua5.4

# CentOS/RHEL
sudo yum install lua

# Windows
# ä» https://www.lua.org/download.html ä¸‹è½½å®‰è£…
```

**éªŒè¯å®‰è£…**ï¼š
```bash
lua -v
# è¾“å‡ºï¼šLua 5.4.x  Copyright (C) 1994-2023 Lua.org, PUC-Rio
```

### 3. Hello World

åˆ›å»º `hello.lua`ï¼š
```lua
print("Hello, Lua!")
```

è¿è¡Œï¼š
```bash
lua hello.lua
```

### 4. äº¤äº’å¼ä½“éªŒ

å¯åŠ¨ Lua äº¤äº’å¼è§£é‡Šå™¨ï¼š
```bash
lua
```

å°è¯•ä¸€äº›åŸºæœ¬æ“ä½œï¼š
```lua
> print("Hello from Lua!")
> local x = 10
> local y = 20
> print(x + y)
> os.exit()
```

## ğŸ’¡ å­¦ä¹ å»ºè®®

1. **å¾ªåºæ¸è¿›**ï¼šæŒ‰ç…§æ–‡æ¡£é¡ºåºå­¦ä¹ ï¼Œä¸è¦è·³è¿‡åŸºç¡€éƒ¨åˆ†
2. **åŠ¨æ‰‹å®è·µ**ï¼šæ¯ä¸ªç¤ºä¾‹ä»£ç éƒ½è¦äº²è‡ªè¿è¡Œå’Œä¿®æ”¹
3. **å¯¹æ¯”æ€è€ƒ**ï¼šæ—¶åˆ»å¯¹ç…§ Java/JSï¼Œç†è§£å·®å¼‚èƒŒåçš„è®¾è®¡æ€æƒ³
4. **å…³æ³¨é™·é˜±**ï¼šç‰¹åˆ«æ³¨æ„æ ‡è®°ä¸º"é™·é˜±"çš„éƒ¨åˆ†ï¼Œé¿å…å¸¸è§é”™è¯¯
5. **æŸ¥é˜…æ‰‹å†Œ**ï¼šé‡åˆ°ç–‘é—®æ—¶å‚è€ƒ [Lua å®˜æ–¹æ‰‹å†Œ](https://www.lua.org/manual/5.4/)

## ğŸ”§ å®é™…åº”ç”¨åœºæ™¯

### Redis Lua è„šæœ¬
åœ¨ Redis ä¸­ä½¿ç”¨ Lua ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼š
```lua
-- åˆ†å¸ƒå¼é™æµå™¨ç¤ºä¾‹
local key = KEYS[1]
local limit = tonumber(ARGV[1])
local current = redis.call('INCR', key)
if current > limit then
    return 0
else
    return 1
end
```

### OpenResty Web å¼€å‘
ä½¿ç”¨ Lua + Nginx æ„å»ºé«˜æ€§èƒ½ Web æœåŠ¡ï¼š
```lua
local cjson = require("cjson")
ngx.say(cjson.encode({
    message = "Hello from OpenResty!"
}))
```

### æ¸¸æˆè„šæœ¬
åœ¨ Unityã€Cocos2d-x ç­‰å¼•æ“ä¸­ä½¿ç”¨ Lua å¼€å‘æ¸¸æˆé€»è¾‘ã€‚

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹èµ„æº
- [Lua å®˜æ–¹ç½‘ç«™](https://www.lua.org/)
- [Lua 5.4 å‚è€ƒæ‰‹å†Œ](https://www.lua.org/manual/5.4/)
- [Programming in Lua (PIL)](https://www.lua.org/pil/)

### è¿›é˜¶å­¦ä¹ 
- [LuaJIT å®˜æ–¹æ–‡æ¡£](https://luajit.org/)
- [OpenResty æœ€ä½³å®è·µ](https://moonbingbing.gitbooks.io/openresty-best-practices/)
- [Lua Users Wiki](http://lua-users.org/wiki/)

### ç¤¾åŒºä¸è®ºå›
- [Lua ä¸­æ–‡ç¤¾åŒº](https://www.lua.org/lua-l.html)
- [Stack Overflow Lua æ ‡ç­¾](https://stackoverflow.com/questions/tagged/lua)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤é—®é¢˜å’Œæ”¹è¿›å»ºè®®ï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®ä¸ºå¼€æºå­¦ä¹ èµ„æºï¼Œæ¬¢è¿è‡ªç”±ä½¿ç”¨å’Œåˆ†äº«ã€‚

## ğŸ’¬ åé¦ˆä¸æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ [GitHub Issue](../../issues)
- å‘èµ· [Discussion](../../discussions)

## â­ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ Star â­ï¸ æ”¯æŒï¼

---

**å¼€å§‹ä½ çš„ Lua å­¦ä¹ ä¹‹æ—…å§ï¼** ğŸš€